<html>

<head>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
	<link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css"/>
	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
	<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script>
	var currentUser =false;
	var userRole = '';
	var userId = '';
    function loginCheck(){
      var params ={};

      var Email = document.getElementById("uname").value;
      var Password = document.getElementById("pwd").value;
      var params = {"email":Email,"password":Password};
      var URL ="http://localhost:8080/login";

      $.ajax({
        type: "GET",
        url: URL,
        dataType: "html",
        data: params,
        success: function(msg) {
          var info = msg;
          if(info == "Incorrect Password/Email"){
						alert(info);
						currentUser=Email;
          }
          else{
            currentUser = Email;
            userRole = info;
            mainPage();
          };
        }
      });
    }


    function mainPage(){
			if(currentUser){
				var URL ="http://localhost:8080/loadMain";
				$.ajax({
					type: "GET",
					url: URL,
					dataType: "html",
					success: function(msg) {
						document.getElementById("main").innerHTML = msg;
						document.getElementById("headVal").innerHTML = '<h1>Home</h1>';
					}
				});
			}
			else{
				alert("Please login")
			}
	}
	
		function displayCompany(){//for display table
			if(currentUser){
				var URL ="http://localhost:8080/displayComapany";
				params = {
				};
				$.ajax({
					type: "GET",
					url: URL,
					dataType: "html",
					data: params,
					success: function(msg) {
						document.getElementById("main").innerHTML = msg;
					},
					error : function(jgXHR, textStatus, errorThrown){
						$("#displayComp").html("Error:" + textStatus + " " + errorThrown);
					}
				});
			}else{
				alert("Please login")
			}
	}

  </script>

	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
	<link type="text/css" rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css"/>
	<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
	<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	
	<script type="text/javascript">
	</script>
	
</head>

<body>
<div data-role="page" id="pageone">

<!-- Creating a panel -->
	<div data-role="panel" id="panel">
		<a onclick="mainPage()" data-rel="close" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-home ui-btn-icon-left">Home</a>
		<a onclick="displayCompany()" data-rel="close" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-grid ui-btn-icon-left">Comapny Listing</a>
		<a onclick="addReviews()" data-rel="close" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-grid ui-btn-icon-left">Add Reviews</a>
		<a onclick="jobLisiting()" data-rel="close" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-grid ui-btn-icon-left">Job Listing</a>
		<a data-rel="close" class="ui-alt-icon ui-btn ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-left">Close Menu</a>
	</div>
	
	<div data-role="button" id="signout"></div>

	<div data-role="header" id="header">
		<a href="#panel">Menu</a>
		<a href="#signout" id="signoutButton">Sign Out</a>
		<h1 id="headVal">Home</h1>
	</div>

	<div id="main" data-role="main" class="ui-content">
		<center><h2 style="font-family: Arial, Helvetica, sans-serif;">Drexel Coop Experience</h2></center>
		<div class="logo">
      <center><img src="https://www.myccp.online/sites/default/files/images/Group/TransferOppertunities/drexel.png" alt="drexel logo" style="text-align: center; max-width: 60%; width: auto; height: auto;"></center>
    </div>
		<div class="main">
		  <br><br>
		<label style="font-family: Arial, Helvetica, sans-serif;"><b>Email</b></label>
		<input type="text" style="width: 100%; margin: 20px 0; display: inline-block; border: .8px solid rgb(133, 131, 131);" placeholder="Enter Email" id="uname" required>
		<label style="font-family: Arial, Helvetica, sans-serif;"><b>Password</b></label>
		<input type="password" style="width: 100%; margin: 20px 0; display: inline-block; border: .8px solid rgb(133, 131, 131);" placeholder="Enter Password" id="pwd" />
		<button type="submit" style="background-color: rgb(48, 66, 170); color: white; margin: 20px 0;cursor: pointer; width: 100%;" onclick="loginCheck()">Log In</button>  
		</div>	
	</div>

	<div data-role="footer" id="footer">
		<h1>Drexel University</h1>
	</div>		
</div>
</body>

<div id="displayComp"></div>

</html>

